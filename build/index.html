
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <a href="https://www.finqware.com">
        <img src="images/logo.png" class="logo" width="112" height="35" alt="Logo" />
      </a>
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#quick-start" class="toc-h1 toc-link" data-title="Quick start">Quick start</a>
          </li>
          <li>
            <a href="#overview" class="toc-h1 toc-link" data-title="Overview">Overview</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#skills" class="toc-h2 toc-link" data-title="Skills">Skills</a>
                  </li>
                  <li>
                    <a href="#servicers" class="toc-h2 toc-link" data-title="Servicers">Servicers</a>
                  </li>
                  <li>
                    <a href="#tenants" class="toc-h2 toc-link" data-title="Tenants">Tenants</a>
                  </li>
                  <li>
                    <a href="#security-model" class="toc-h2 toc-link" data-title="Security model">Security model</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#guide" class="toc-h1 toc-link" data-title="Guide">Guide</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#user-onboarding" class="toc-h2 toc-link" data-title="User onboarding">User onboarding</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#catalog-api" class="toc-h1 toc-link" data-title="Catalog API">Catalog API</a>
          </li>
          <li>
            <a href="#sessions-api" class="toc-h1 toc-link" data-title="Sessions API">Sessions API</a>
          </li>
          <li>
            <a href="#aisp-apis" class="toc-h1 toc-link" data-title="AISP APIs">AISP APIs</a>
          </li>
          <li>
            <a href="#marketplace-apis" class="toc-h1 toc-link" data-title="Marketplace APIs">Marketplace APIs</a>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://www.finqware.com/joinalpha'>Sign Up for our alpha testing program</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='quick-start'>Quick start</h1>
<p>Welcome to the <a href="https://www.finqware.com">Finqware</a> API!</p>

<p>This alpha phase is about learning and testing various Open Banking APIs.</p>

<ol>
<li><a href="https://www.finqware.com/joinalpha">Register</a> yourself (personal or company) as a <code>servicer</code></li>
<li>Register a tenant app with your servicer and get your API keys</li>
<li>Go through the skills catalog and check what you want to implement</li>
<li>Write the code, use the sandbox mode for each <em>skill</em> for test &amp; dev</li>
</ol>
<h1 id='overview'>Overview</h1><h2 id='skills'>Skills</h2><h3 id='concept'>Concept</h3>
<p>Open Banking is about <em>opening</em> access for businesses to create value on top of financial services provided via APIs.</p>

<p>Each API that we integrate into our middleware is a <code>skill</code>. Examples: an account information API from Bank X is a skill, a payment initiation service from Bank Y is another skill.</p>

<p>With the initial releases, we&#39;ll focus on three skill types: account information, payment initiation and marketplace. As a roadmap item we&#39;re planning to introduce more utility such as <em>customer care</em> and skills related to <em>resource management</em>.</p>

<p>Each skill comes in two flavors: production and sandbox. Test &amp; dev tenants will use sandbox skills.</p>
<h3 id='account-information'>Account information</h3>
<p>These skills are mainly based on PSD2 AISP APIs from various banks.</p>

<p>Use cases: wallet applications or enterprise systems that need to query for bank accounts and transaction reports.</p>
<h3 id='payment-initiation'>Payment initiation</h3>
<p>Based on PSD2 PISP APIs from various banks.</p>

<p>Use cases: merchants willing to accept payments through a direct account-to-account transfer bypassing classic payment schemes.</p>
<h3 id='marketplace'>Marketplace</h3>
<p>Based on custom connectors that we&#39;re building with our partner servicers.</p>

<p>Use cases: marketplaces interested in selling financial products without the hassle of a direct integration with banks, insurance providers etc.</p>
<h2 id='servicers'>Servicers</h2>
<p>A <code>servicer</code> is a partner company registered with Finqware.</p>

<p>It may be a bank or an insurance company providing skills into the middleware, or a fintech that consumes the Finqware API.</p>

<p>Or even both: a bank may be providing its own APIs into the middleware and at the same time it may implement a multi-banking experience on top of Finqware.</p>

<p>From a Finqware API consumer standpoint, a servicer may register multiple <code>tenant</code> apps.</p>

<p>A servicer has a number of developers/users with credentials on our developer&#39;s portal.</p>
<h2 id='tenants'>Tenants</h2>
<p>A <code>tenant</code> is your software, consuming the Finqware API. It usually has two components:</p>

<ul>
<li>a client-side application (eg: a mobile and/or a web front-end)</li>
<li>a server. This is where you run the business logic, the user database etc.</li>
</ul>

<p>It&#39;s important to make a clear distinction between the two. There are specific data items (i.e. tokens, secrets) that you can safely store in your client app, and others that we recommend to be used only in a server-to-Finqware communication.</p>

<p>A servicer may register multiple tenant apps for different business cases or just for technical reasons (eg: test &amp; prod apps).</p>

<p>For a granular access control and reporting, each tenant is required to register the list of skills it connects to.</p>
<h2 id='security-model'>Security model</h2><h1 id='guide'>Guide</h1>
<p>This section is for <a href="#tenants">tenant</a> app developers who want to implement the base API (REST &amp; GraphQL). As a roadmap item, we&#39;ll provide open source SDKs to simplify this process.</p>

<p>Implementing Finqware <a href="#skills">skills</a> is always centered around the <strong>end-user</strong> - the individual or institution who owns the data queried through the middleware. As a <a href="#tenants">tenant</a> app developer, you&#39;re implementing two aspects:</p>

<ol>
<li><p>A conversational UX that takes the user through a number of action steps in order to get access to the data. This is a web or native-mobile UI that takes your user through an onboarding experience.</p></li>
<li><p>A Backend/server piece that consumes data the user has already consented for.</p></li>
</ol>
<h2 id='user-onboarding'>User onboarding</h2>
<p>The first thing to focus on is to offer your user a smooth onboarding experience. It may be a classic wizard with a step-by-step approach or a more inovative approach like chatbot or voice-based UIs.</p>

<p>The <a href="#sessions-api">Sessions API</a> helps you implement such a UI. A session is very similar to what most of us know from web programming: an ordered sequence of steps that share the same state. Although this is a unified developer experience, each skill may have particular steps to implement.</p>

<p>Practical examples:</p>

<ul>
<li>getting the user consent for an account information skill is a one-step session (i.e. trigger the strong customer authentication process)</li>
<li>selling a bank deposit product takes the user through multiple steps where the user may be required to submit information and upload data in separate steps due to inter-step dependencies.</li>
</ul>

<p>As we integrate more skills into the middleware, we&#39;ll be documenting the required steps for each case. The Sessions API is generic enough to support complex conversational UIs that involve multiple iterations, uploads, synchronous and asynchronous communication (eg: cases where the online session might be interrupted due to an offline verification).</p>

<p>This diagram is an example of a three-step session, where the first two steps have attachments (uploads).</p>

<p><img src="images/finq_session_states.png" alt="image" /></p>

<p><strong>A session is essentially a conversation where each message may include attachments.</strong></p>
<h3 id='detailed-flow'>Detailed flow</h3>
<p>An oboarding session is triggered by a <code>HTTP POST</code> to the <code>/sessions</code> endpoint. It has to include three elements:</p>

<ul>
<li><code>client_id</code>: identifies your tenant application</li>
<li><code>client_app_key</code>: authorizes the call (safe to be used from a client app)</li>
<li><code>skill</code>: which skill you&#39;re starting the onboarding session for. This is taken from the skills catalog published and updated on our docs.</li>
</ul>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{client_id}}"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"client_app_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{client_app_key}}"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"skill"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xyz_aisp_sbx_#1.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Following a successfull call, you will receive a message including:</p>

<ul>
<li>a <code>session_id</code>: identifies the newly created session. You will use this to submit subsequent steps.</li>
<li>a <code>nonce</code>: a temporary token safe to be used from a client app. You will use this to submit data in the next iteration - that would be step #1 into your session. Currently the nonce expires in 30 minutes.</li>
<li>a <code>status</code>: an informative message</li>
</ul>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F3YXJlCjAwMTZpZGVudGlmaWVyIG5vbmNlcwowMDJlY2lkIHRpbWU8MjAxOS0wNS0zMVQwOToxNToxNS41OTE5Nz"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"session_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7489fe74-a91d-4897-8895-cd5e05c0fc4b"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SESSION_CREATED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Now that the session is created, you can start submitting data specific to each skill. At each iteration you specify the <code>step</code> and provide the <code>nonce</code> retrieved from the previous one. In a multi-step session, at each step submission, the response message will include a <code>step_id</code> and the <code>nonce</code> for the next step.</p>

<p>Use the <code>/sessions/{session_id}/steps</code> endpoint to submit data for a specific step.</p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{client_id}}"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{nonce}}"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"skill"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xyz_sbx_#3.0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"step"</span><span class="p">:</span><span class="w"> </span><span class="s2">"product_form"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"period"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>At each step, a skill might require specific uploads. An example would be an onboarding session for a credit card product. The KYC (know your customer) flow asks for personal data, ID upload and photo/selfies.</p>

<p>Use the <code>/steps/{step_id}/upload</code> endpoint to submit uploads for a specific step.</p>

<p><img src="images/finq_session.png" alt="image" /></p>
<h1 id='catalog-api'>Catalog API</h1><h1 id='sessions-api'>Sessions API</h1><h1 id='aisp-apis'>AISP APIs</h1><h1 id='marketplace-apis'>Marketplace APIs</h1><h1 id='errors'>Errors</h1>
<aside class="notice">
This error section is stored in a separate file in <code>includes/_errors.md</code>. Slate allows you to optionally separate out your docs into many files...just save them to the <code>includes</code> folder and add them to the top of your <code>index.md</code>'s frontmatter. Files are included in the order listed.
</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- The kitten requested is hidden for administrators only.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified kitten could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a kitten with an invalid method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a format that isn&#39;t json.</td>
</tr>
<tr>
<td>410</td>
<td>Gone -- The kitten requested has been removed from our servers.</td>
</tr>
<tr>
<td>418</td>
<td>I&#39;m a teapot.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
